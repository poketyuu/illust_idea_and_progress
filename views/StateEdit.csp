<!DOCTYPE HTML>
<html lang="ja">
<head>
<%c++
auto StateList = @@.get<std::vector<std::pair<int,std::string>>>("StateList");
int MaxSid = @@.get<int>("MaxSid");
%>
<%view temphead%>
<link rel="stylesheet" href="/css/state_slide.css">
</head>
<body onload="SetOrderEvent({% MaxSid %})">
<%view tempbody%>
<main>
<div class="container px-2 py-5">
<div class="row">
<ul class="list-group">
<li class="list-group-item">
<div class="row">
<div class="col-auto slide-btn mx-2">
</div>
<div class="col-auto">
<p class="my-auto">完成</p>
</div>
</div>
</li>
<ul class="list-group" id="state-list">
<%c++ for(auto state:StateList){
    int sid;
    std::string name;
    std:tie(sid,name) = state;
%>
<li class="list-group-item" id="state-{% sid %}" data-sid="{% sid %}">
<div id="dispstate-{% sid %}" class="row align-items-center justify-content-between">
<div class="col-auto">
<div class="row align-items-center">
<div class="col-auto slide-btn mx-2">
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
</div>
<div class="col-auto">
<p class="my-auto" id="sname-{% sid %}">{% name %}</p>
</div>
</div>
</div>
<div class="col-auto">
<div class="row align-items-center">
<div class="col-auto">
<button class=" btn btn-outline-secondary" onclick="ChangeEditMode(true,{% sid %})">名前を変更</btn>
</div>
<div class="col-auto">
<button class="btn btn-outline-danger" onclick="DeleteState({% sid %})">削除</btn>
</div>
</div>
</div>
</div>
<div id="editstate-{% sid %}" class="row align-items-center justify-content-between" style="display:none;">
<div class="col-auto">
<div class="row align-items-center">
<div class="col-auto slide-btn mx-2">
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
</div>
<div class="col-auto">
<input type="text" id="changename-{% sid %}">
</div>
</div>
</div>
<div class="col-auto">
<div class="row align-items-center">
<div class="col-auto">
<button class=" btn btn-outline-primary" onclick="EditStateName({% sid %})">変更</btn>
</div>
<div class="col-auto">
<button class="btn btn-outline-secondary" onclick="ChangeEditMode(false,{% sid %})">キャンセル</btn>
</div>
</div>
</div>
</div>
</li>
<%c++ }%>
<li class="list-group-item" id="AddState_li">
<div class="row align-items-center justify-content-between">
<div class="col-auto">
<div class="row align-items-center">
<div class="col-auto slide-btn mx-2">
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
<span class="hamburger-bar"></span>
</div>
<div class="col-auto">
<input type="text" placeholder="タグを追加" id="AddState_Txt">
</div>
</div>
</div>
<div class="col-auto">
<div class="row">
<div class="col-auto">
<button class="btn btn-outline-primary" onclick="AddState()">追加</btn>
</div>
</div>
</div>
</div>
</li>
</ul>
<li class="list-group-item">
<div class="row">
<div class="col-auto slide-btn mx-2">
</div>
<div class="col-auto">
<p class="my-auto">未着手</p>
</div>
</div>
</li>
</ul>
</div>
</div>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<script type="text/javascript" src="/js/state_orderChange.js"></script>
</body>
</html>